<!DOCTYPE html>
<!--
Copyright 2019 Sean McNamara <smcnam@gmail.com>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ESO Log Formatter</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/united/bootstrap.min.css" crossorigin="anonymous"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" crossorigin="anonymous"/>
    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/3.0.3/daterangepicker.min.js" crossorigin="anonymous"></script>
    <script src="luxon.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" crossorigin="anonymous"></script>

    <a href="https://github.com/allquixotic/esologformatter" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <div id="spinny" class="loading" style="display: none;">Loading&#8230;</div>

    <div id="instructions">
      <h1>ESO Log Formatter</h1>
      <h3>What's This?</h3>
      <ul>
        <li>This is a formatting tool for <b><a href="https://elderscrollsonline.com">Elder Scrolls Online</a></b> chat log files.</li>
        <li>You can format the ugly-looking ESO log files into much more readable plain text or HTML tables.</li>
      </ul>
      <h3>How do I use it?</h3>
      <ul>
        <li>To get started, first make sure you have chat logs enabled by running the <b>/chatlog</b> command in the game.</li>
        <li>Once you have chat logs enabled, the file <b>C:\Users\(you)\Documents\Elder Scrolls Online\live\Logs\ChatLog.txt</b> should exist and should contain the chat log.</li>
        <li>Once you've located the chat log file, upload it below via Drag-n-Drop, or click "Choose Log File(s)" to select it manually.</li>
        <li>You may select multiple chat log files if you wish.</li>
        <li>Once you get to <b>Step 2</b>, select options to customize the generated logs, then click the orange <b>Generate</b> button at the very bottom of the page.</li>
      </ul>
      <h3>Legal/Privacy</h3>
        <ul>
          <li><b>Legal Disclaimer:</b> This tool is <u>in no way</u> affiliated with, endorsed by, or supported by Bethesda Softworks LLC or ZeniMax Online Studios LLC.</li>
          <li><b>Data Privacy Notice:</b> This tool <u>does not</u> upload ANYTHING to ANY server on the Internet. 100% of the functionality is contained within your web browser on your computer.</li>
          <li>This tool <b>does not</b> use cookies.</li>
        </ul>
    </div>
    <div id="startoverDiv">
      <button id="startOver" class="btn-primary" onclick="location.reload()">Start Over</button>
    </div>
    <div id="step1">
      <h2>Step 1.</h2> <label id="customFileLabel" class="btn btn-primary btn-file">
          Choose Log File(s) <input type="file" id="customFile" style="display: none;" multiple>
      </label>
      Or drag and drop files below
      <div class="upload-drop-zone" id="drop-zone">
        Just drag and drop files here
      </div>
    </div>
    <div id="list"></div>
    <div id="step2" style="display:none;">
      <br/>
      <h2>Step 2. Options</h2>
      <h3>General Options</h3>
      <label for="drpcb">Do you want messages only from specific dates/times?</label>
      <input id="drpcb" type="checkbox" class="form-control match-content" style="display: inline;" onchange="drpcbChange()">
      <br>
      <label id= "drplbl" for="drp" style="display: none;">Date Range</label>
      <input id="drp" type="text" class="form-control match-content" style="display: none;">
      <label for="timeformat">Time Format</label>
      <select id="timeformat" class="form-control match-content" onchange="timeFormatChange()">
        <option value="friendly">US: [02/17/19 03:38pm UTC-5]</option>
        <option value="friendlynotz">US without Timezone: [02/17/19 03:38pm]</option>
        <option value="minfriendly">Minimal US: 2/17/19 3:38pm</option>
        <option value="orig">Raw: 2019-02-17T15:38:15.052-05:00</option>
        <option value="european">European (DD/MM/YY): 17/2/19 15:38 UTC-5</option>
        <option value="none">None</option>
      </select>
      <label for="outputformat">Output Format</label>
      <select id="outputformat" class="form-control match-content" onchange="outputFormatChange()">
        <option value="table">HTML Table</option>
        <option value="plain">Plain Text</option>
      </select>
      <label for="sorttime" style="display: inline;">Sort by time?</label>
      <input id="sorttime" type="checkbox" class="form-control match-content" style="display: inline;" onchange="sortTimeChange()">
      <h3>Identify and Select Channels</h3>
      <div class="table-responsive">
      <table id="channelTable" class="table table-bordered">
        <thead class="thead-light">
          <tr id="headerRow">
            <th scope="col" style="display: table-cell;">Include in Output?</th>
            <th scope="col" style="display: table-cell;">Channel Name</th>
            <th scope="col" style="display: table-cell;">Channel # in Log</th>
            <th scope="col" style="display: table-cell;">Example Chat Lines</th>
          </tr>
        </thead>
        <tbody id="channelTableBody">
        </tbody>
      </table>
      </div>
      <button id="goButton" class="btn-primary" onclick="doGenerate()">Generate</button>
    </div>
    <div class="border" id="debug"><h3>Debug Log</h3></div>
    <div id="finalRender" style="display: none;"></div>
    <script src="script.js"></script>
  </body>
</html>